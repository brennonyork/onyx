<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>onyx.peer.task-lifecycle-extensions documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Onyx 0.6.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>onyx</span></div></div></li><li class="depth-2 branch"><a href="onyx.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2 branch"><a href="onyx.extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extensions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commands</span></div></div></li><li class="depth-4 branch"><a href="onyx.log.commands.abort-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>abort-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.accept-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>accept-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.exhaust-input.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exhaust-input</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.gc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gc</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.kill-job.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kill-job</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.leave-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>leave-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.notify-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notify-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.prepare-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prepare-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.seal-output.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seal-output</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.signal-ready.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal-ready</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.submit-job.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>submit-job</span></div></a></li><li class="depth-4"><a href="onyx.log.commands.volunteer-for-task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>volunteer-for-task</span></div></a></li><li class="depth-3 branch"><a href="onyx.log.entry.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>entry</span></div></a></li><li class="depth-3"><a href="onyx.log.zookeeper.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zookeeper</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -517px;"><span class="top" style="height: 526px;"></span><span class="bottom"></span></span><span>peer</span></div></div></li><li class="depth-3 branch"><a href="onyx.peer.operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operation</span></div></a></li><li class="depth-3 branch"><a href="onyx.peer.pipeline-extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-extensions</span></div></a></li><li class="depth-3 current"><a href="onyx.peer.task-lifecycle-extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task-lifecycle-extensions</span></div></a></li><li class="depth-2 branch"><a href="onyx.planning.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>planning</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></div></li><li class="depth-3 branch"><a href="onyx.plugin.core-async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-async</span></div></a></li><li class="depth-3"><a href="onyx.plugin.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>queue</span></div></div></li><li class="depth-3"><a href="onyx.queue.hornetq-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq-utils</span></div></a></li><li class="depth-2 branch"><a href="onyx.system.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-2"><a href="onyx.validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validation</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-close-lifecycle-resources"><div class="inner"><span>close-lifecycle-resources</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-close-lifecycle-resources*"><div class="inner"><span>close-lifecycle-resources*</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-close-temporal-resources"><div class="inner"><span>close-temporal-resources</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-close-temporal-resources*"><div class="inner"><span>close-temporal-resources*</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-ident-dispatch"><div class="inner"><span>ident-dispatch</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-inject-lifecycle-resources"><div class="inner"><span>inject-lifecycle-resources</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-inject-lifecycle-resources*"><div class="inner"><span>inject-lifecycle-resources*</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-inject-temporal-resources"><div class="inner"><span>inject-temporal-resources</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-inject-temporal-resources*"><div class="inner"><span>inject-temporal-resources*</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-merge-api-levels"><div class="inner"><span>merge-api-levels</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-name-dispatch"><div class="inner"><span>name-dispatch</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-start-lifecycle.3F"><div class="inner"><span>start-lifecycle?</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-start-lifecycle.3F*"><div class="inner"><span>start-lifecycle?*</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-type-and-medium-dispatch"><div class="inner"><span>type-and-medium-dispatch</span></div></a></li><li class="depth-1"><a href="onyx.peer.task-lifecycle-extensions.html#var-type-dispatch"><div class="inner"><span>type-dispatch</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">onyx.peer.task-lifecycle-extensions</h2><div class="doc"><pre class="plaintext">Public API extensions for implementors of task lifecycles.
</pre></div><div class="public anchor" id="var-close-lifecycle-resources"><h3>close-lifecycle-resources</h3><h4 class="type">multimethod</h4><h4 class="added">added in 0.6.0</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Closes any resources that were opened during the execution of a task by a
virtual peer. Called once at the end of a task for each virtual peer.
Must return a map.</pre></div></div><div class="public anchor" id="var-close-lifecycle-resources*"><h3>close-lifecycle-resources*</h3><div class="usage"><code>(close-lifecycle-resources* event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-close-temporal-resources"><h3>close-temporal-resources</h3><h4 class="type">multimethod</h4><h4 class="added">added in 0.6.0</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Closes any resources that were opened during a particular lifecycle run.
Called once for each lifecycle run. Must return a map.</pre></div></div><div class="public anchor" id="var-close-temporal-resources*"><h3>close-temporal-resources*</h3><div class="usage"><code>(close-temporal-resources* event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-ident-dispatch"><h3>ident-dispatch</h3><div class="usage"><code>(ident-dispatch {:keys [onyx.core/task-map]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-inject-lifecycle-resources"><h3>inject-lifecycle-resources</h3><h4 class="type">multimethod</h4><h4 class="added">added in 0.6.0</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Adds keys to the event map. This function is called once
at the start of each task each for each virtual peer.
Keys added may be accessed later in the lifecycle.
Must return a map.</pre></div></div><div class="public anchor" id="var-inject-lifecycle-resources*"><h3>inject-lifecycle-resources*</h3><div class="usage"><code>(inject-lifecycle-resources* event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-inject-temporal-resources"><h3>inject-temporal-resources</h3><h4 class="type">multimethod</h4><h4 class="added">added in 0.6.0</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Adds keys to the event map. This function is called once
per pipeline execution per virtual peer. Keys added may
be accessed later in the lifecycle. Must return a map.</pre></div></div><div class="public anchor" id="var-inject-temporal-resources*"><h3>inject-temporal-resources*</h3><div class="usage"><code>(inject-temporal-resources* event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-merge-api-levels"><h3>merge-api-levels</h3><div class="usage"><code>(merge-api-levels f event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-name-dispatch"><h3>name-dispatch</h3><div class="usage"><code>(name-dispatch {:keys [onyx.core/task-map]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-start-lifecycle.3F"><h3>start-lifecycle?</h3><h4 class="type">multimethod</h4><h4 class="added">added in 0.6.0</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Sometimes znode ephemerality is not enough to signal that a task
can begin executing due to external conditions. Onyx addresses this
concern by providing this check just before task execution begin.

Checks if it&apos;s acceptable to start task execution.
Must return a map with key :onyx.core/start-lifecycle?
and value of type boolean.

This operation will be retried after a back-off period.</pre></div></div><div class="public anchor" id="var-start-lifecycle.3F*"><h3>start-lifecycle?*</h3><div class="usage"><code>(start-lifecycle?* event)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-type-and-medium-dispatch"><h3>type-and-medium-dispatch</h3><div class="usage"><code>(type-and-medium-dispatch {:keys [onyx.core/task-map]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-type-dispatch"><h3>type-dispatch</h3><div class="usage"><code>(type-dispatch {:keys [onyx.core/task-map]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>